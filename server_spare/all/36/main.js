
/*
let btn1 = document.querySelector('#addBtn1');
let input1 = document.querySelector('#input1');
let btn2 = document.querySelector('#addBtn2');
let input2 = document.querySelector('#input2');
*/

let btn3 = document.querySelector('#addBtn3');
let btn4 = document.querySelector('#addBtn4');
let btn5 = document.querySelector('#addBtn5');
//let btn9 = document.querySelector('#addBtn9');
let btn15 = document.querySelector('#addBtn15');
let btn15_ = document.querySelector('#addBtn15_');


let btn55 = document.querySelector('#addBtn35');
/*
//1
btn1.addEventListener('click',function(){
  let inputVal = input1.value;
  let xml =new XMLHttpRequest();
  xml.open('post','/b1');
  xml.onreadystatechange = function(){
    if(xml.readyState == 4 && xml.status ==200){
        console.log(xml.responseText);
       // document.getElementById('a10').innerHTML=data[5].name; 
       document.getElementById('a1').innerHTML=xml.responseText;
     }}
        xml.setRequestHeader('Content-Type','application/json')
        xml.send(JSON.stringify({msg:inputVal}));
          })

//2
btn2.addEventListener('click',function(){
    let inputVal = input2.value;
    let xml =new XMLHttpRequest();
    xml.open('post','/b2');
    xml.onreadystatechange = function(){
        if(xml.readyState == 4 && xml.status ==200){
            console.log(xml.responseText);
           // document.getElementById('a10').innerHTML=data[5].name; 
           document.getElementById('a1').innerHTML=xml.responseText;
        }}
           xml.setRequestHeader('Content-Type','application/json')
           xml.send(JSON.stringify({msg:inputVal}));
            })
           */
//3
/*
btn3.addEventListener('click',function(){
  console.log("but3");
  let inputVal = input2.value;
  let xml =new XMLHttpRequest();
  xml.open('post','/b3');
  xml.onreadystatechange = function(){
    console.log("but3");
  //  let a=[1,2,3]
 // let a=  [{"db_user_type":[4,4,4,4,4,4,4,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,4,4,3,3,3,3,3,3],"db_user_status":[0,0,0,0,0,0,0,1,0,null,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],"db_user_tmst":["2023-12-01 10:10","2024-12-01 12:50:10","2024-12-01 12:50:20","2024-12-01 12:50:20","2024-12-01 14:50:30","2024-12-01 14:50:40","2024-12-2 12:44:12","2024-12-2 12:44:48","2024-12-2 12:46:23","2024-12-2 12:46:23","2024-12-2 12:48:54","2024-12-2 12:50:10","2024- 12-2 12:51:27","2024-12-2 12:52:43","2024- 12-2 13:2:53","2023-12-01 10:10","2023-12-01 10:10","2023-12-01 10:10","2023-12-01 10:10","2023-12-01 10:10","2023-12-01 10:10","2023-12-01 10:10","2023-12-01 10:10","2023-12-01 10:10","2023-12-01 10:10","2023-12-01 10:10","2023-12-01 10:10","2023-12-01 10:10","2023-12-01 10:10","2023-12-01 10:10","2023-12-01 10:10","2023-12-01 10:10","2023-12-01 10:10","2023-12-01 10:10","2024-12-2 12:44:48","2024-12-2 12:44:48","2024-12-2 12:44:48","2024-12-2 12:44:48","2024-12-2 12:44:48","2024-12-2 12:44:48"],"db_user_id":[857,858,859,860,861,862,869,870,871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,1321,1322,1323,1324,1325,1326]}]
  //  tabledraw(xml.responseText)
    let a='{"db_user_type":[4,4,4],"db_user_status":[0,0,0],"db_user_tmst":[1,2,3],"db_user_id":[857,858,1]}'
 // console.log("from main_table _draw_a",a);
  tabledraw(a)
      if(xml.readyState == 4 && xml.status ==200){
          console.log(xml.responseText);
         // document.getElementById('a10').innerHTML=data[5].name; 
       //  document.getElementById('a1').innerHTML=xml.responseText;

//test get row
var table = document.getElementById("table");
var rows = table.getElementsByTagName("tr");
table.rows[2].getElementsByTagName("td")[4].innerHTML=777
//   table.rows[i].getElementsByTagName("td")[4]).innerHTML
table.rows[i].getElementsByTagName("td")[4].style.backgroundColor = '#CFB6BF';
var g_id=0;
var g_id_1=0;
///bojenje prve kolone
var table = document.getElementById("table");
table.style.backgroundColor = 'red';
var rows = table.getElementsByTagName("tr");
var cell = row.getElementsByTagName("td")[0];
//row.getElementsByTagName("td")[0];
row.getElementsByTagName("td")[0].style.backgroundColor = 'red';;
//currentRow.style.backgroundColor = '#CFB6BF';
//cell.style.backgroundColor = '#CFB6BF';
cell.style.backgroundColor = 'red';
//currentRow.style.backgroundColor = "white";
currentRow.style.backgroundColor = "green";
row.style.backgroundColor = "yellow"; 
row[0].style.backgroundColor = "yellow"; 


///bojenje prve kolone  end



      }}
         xml.setRequestHeader('Content-Type','application/json')
         xml.send(JSON.stringify({msg:inputVal}));
          })   
 */        
//4

//btn4.addEventListener('click',function(){
//test get row

/*   ovaj deo radi
var table = document.getElementById("table");
var rows = table.getElementsByTagName("tr");
table.rows[2].getElementsByTagName("td")[4].innerHTML=777
table.rows[0].getElementsByTagName("td")[5].style.backgroundColor = 'red';
*/



/*
//   table.rows[i].getElementsByTagName("td")[4]).innerHTML
table.rows[i].getElementsByTagName("td")[4].style.backgroundColor = '#CFB6BF';
var g_id=0;
var g_id_1=0;
///bojenje prve kolone
var table = document.getElementById("table");
table.style.backgroundColor = 'red';
var rows = table.getElementsByTagName("tr");
var cell = row.getElementsByTagName("td")[0];
//row.getElementsByTagName("td")[0];/*
row.getElementsByTagName("td")[0].style.backgroundColor = 'red';;
//currentRow.style.backgroundColor = '#CFB6BF';
//cell.style.backgroundColor = '#CFB6BF';
cell.style.backgroundColor = 'red';
//currentRow.style.backgroundColor = "white";
currentRow.style.backgroundColor = "green";
row.style.backgroundColor = "yellow"; 
row[0].style.backgroundColor = "yellow"; 
*/

///bojenje prve kolone  end*******************






/*

  let ad=[]

    ad[0]= document.getElementById("meeting-time").value;
    ad[1]= document.getElementById("meeting-time1").value;

   console.log("ad: ", ad );

  console.log("but4");
  let inputVal = input2.value;
  let xml =new XMLHttpRequest();
  xml.open('post','/b4_1');
  xml.onreadystatechange = function(){
      if(xml.readyState == 4 && xml.status ==200){
          console.log(xml.responseText);
         // document.getElementById('a10').innerHTML=data[5].name; 
       //  document.getElementById('a1').innerHTML=xml.responseText;
      }}
         xml.setRequestHeader('Content-Type','application/json')
       //  xml.send(JSON.stringify({msg:inputVal}));
       xml.send(JSON.stringify({msg:ad}));
          })                      
*/
 //5
btn5.addEventListener('click',function(){
  let ad=[]

    ad[0]= document.getElementById("meeting-time").value;
    ad[1]= document.getElementById("meeting-time1").value;
  // let pl= document.getElementById("place").value;
 // let pl= document.getElementById("place").innerHTML;
  let pl= document.getElementById("place").inputVal;

   console.log("ad: ", ad );
   console.log("from _main_place: ", pl );
  console.log("but5");

  var select = document.getElementById('place');
// var text = select.options[select.selectedIndex].text;
ad[2] = select.options[select.selectedIndex].value;
  console.log("ad: ",ad);

 // let inputVal = input2.value;
  let xml =new XMLHttpRequest();
  xml.open('post','/b5');
  xml.onreadystatechange = function(){
      if(xml.readyState == 4 && xml.status ==200){
          console.log("main_5_resp: ",xml.responseText);
          let resp=JSON.parse(xml.responseText);
          console.log("main_5_resp_parsed: ",resp);
         // let resp_s=stringify("From:",`${resp.from}`,"\n","To: ",`${resp.from}`);
      //   let resp_s=String("From:"+resp.from+"  To: "+resp.to+"  Place: "+resp.place+" ProductNr: "+resp.res);//ok
        let resp_s=String("From:  "+resp.from+"\nTo:       "+resp.to+"\nPlace: "+resp.place+"\nProduct realized: "+resp.res);
          console.log("main_5_resp_s_string: ",resp_s);

         // document.getElementById("text1").innerHTML = stringify("From:",`${resp.from}`,"\n","To: ",`${resp.from}`);
        //  document.getElementById("text1").innerHTML = "From:",,"\n","To: ",`${resp.from}`;
        document.getElementById("text1").innerHTML =resp_s

         // document.getElementById('a10').innerHTML=data[5].name; 
       //  document.getElementById('a1').innerHTML=xml.responseText;
      }}
         xml.setRequestHeader('Content-Type','application/json')
       //  xml.send(JSON.stringify({msg:inputVal}));
       xml.send(JSON.stringify({msg:ad}));
          }) 
          
//get 
/*
btn9.addEventListener('click',function(){
           // let inputVal = input1.value;
           console.log("main-butt_9");
            let xml =new XMLHttpRequest();
            xml.open('post','/b9');
            xml.onreadystatechange = function(){
              if(xml.readyState == 4 && xml.status ==200){
                  console.log(xml.responseText);
                 // document.getElementById('a10').innerHTML=data[5].name; 
               //  document.getElementById('a1').innerHTML=xml.responseText;
               }}
                  xml.setRequestHeader('Content-Type','application/json')
                  xml.send(JSON.stringify({msg:123}));
                    })
                  
*/



function myFunction1(){console.log("start ok");

let a=1;
             let xml =new XMLHttpRequest();
             xml.open('post','/time');
             xml.onreadystatechange = function(){
               if(xml.readyState == 4 && xml.status ==200){
                   console.log("main_time:",xml.responseText);
                  // document.getElementById('a10').innerHTML=data[5].name; 
               //   document.getElementById("meeting-time1").value=xml.responseText;  //ok
               let a= xml.responseText;
               let a_s=String(a);
               console.log("main_time_minus two chars:",a);
            
               console.log("main_time_minus two chars_a_s:",a_s);
               let ress = a_s.substring(0, 16);
               console.log("main_time_minus two chars_ress:",ress);
               document.getElementById("meeting-time1").value=ress;

               //from 
               let ress_1 = a_s.substring(11, 13);
               console.log("main_time_get hour:",ress_1,"a");
               let ress_2=Number(ress_1);
               console.log("main_time_ress_2:",ress_2);
               let ress_3=ress_2-1;
           //    if  (ress_3<10){let ress_4="0"}
               let prvi_deo=a_s.substring(0, 11);
               console.log("main_time_prvi_deo:",prvi_deo);
               let drugi_deo=a_s.substring(13, 16);
               console.log("main_time_drugi_deo:",drugi_deo);
              if(ress_3>10){ let fin_s=prvi_deo+String(ress_3)+drugi_deo; document.getElementById("meeting-time").value=fin_s;}
           //    let fin_s=prvi_deo+String(ress_3)+drugi_deo;
           if(ress_3<10){   let fin_s=prvi_deo+"0"+String(ress_3)+drugi_deo; document.getElementById("meeting-time").value=fin_s;}
                          //  let fin_s=prvi_deo+ress_4+String(ress_3)+drugi_deo;

               console.log("main_time_final:",fin_s);
              
              // let rr= "2025-04-02T15:12"
              //  let rr= "2025-04-02 15:12"

             //  document.getElementById("meeting-time1").value=ress;
               
                }}
                   xml.setRequestHeader('Content-Type','application/json')
                  // xml.send(JSON.stringify({msg:a}));
                 // xml.send(JSON.stringify({msg:ress}));
                 xml.send(JSON.stringify({msg:a}));
           }
           
//butt 15
btn15.addEventListener('click',function(){
  // let inputVal = input1.value;
  let ad=[]

  ad[0]= document.getElementById("meeting-time").value;
  ad[1]= document.getElementById("meeting-time1").value;
  console.log("main-butt_15");
   let xml =new XMLHttpRequest();
   xml.open('post','/b15');
   xml.onreadystatechange = function(){
     if(xml.readyState == 4 && xml.status ==200){
         console.log(xml.responseText);
///new draw table
 // let a='{"db_user_type":[4,4,4],"db_user_status":[0,0,0],"db_user_tmst":[1,2,3],"db_user_id":[857,858,1]}'
   let a='{"db_user_type":[4,4,8],"db_user_status":[0,8,0,0,0,0,0,0],"db_user_tmst":[1,9,3],"db_user_id":[857,858,1]}'
// console.log("from main_table _draw_a",a);
 tabledraw1(a)
///new draw table
        // document.getElementById('a10').innerHTML=data[5].name; 
      //  document.getElementById('a1').innerHTML=xml.responseText;
      }}
         xml.setRequestHeader('Content-Type','application/json')
       //  xml.send(JSON.stringify({msg:123}));
       xml.send(JSON.stringify({msg:ad}));
           })
//butt 15_         
btn15_.addEventListener('click',function(){
  // let inputVal = input1.value;
  let ad=[]

  ad[0]= document.getElementById("meeting-time").value;
  ad[1]= document.getElementById("meeting-time1").value;
  console.log("main-butt_15_");
   let xml =new XMLHttpRequest();
   xml.open('post','/b15_');
   xml.onreadystatechange = function(){
     if(xml.readyState == 4 && xml.status ==200){
         console.log(xml.responseText);
///new draw table
 // let a='{"db_user_type":[4,4,4],"db_user_status":[0,0,0],"db_user_tmst":[1,2,3],"db_user_id":[857,858,1]}'
   let a='{"db_user_type":[4,4,8],"db_user_status":[0,8,0,0,0,0,0,0],"db_user_tmst":[1,9,3],"db_user_id":[857,858,1]}'
// console.log("from main_table _draw_a",a);
 tabledraw1_(a)
///new draw table
        // document.getElementById('a10').innerHTML=data[5].name; 
      //  document.getElementById('a1').innerHTML=xml.responseText;
      }}
         xml.setRequestHeader('Content-Type','application/json')
       //  xml.send(JSON.stringify({msg:123}));
       xml.send(JSON.stringify({msg:ad}));
           })



           setInterval( function() {
          
              // let inputVal = input1.value;
              console.log("main-butt_9");
               let xml =new XMLHttpRequest();
               xml.open('post','/con_staus');
               xml.onreadystatechange = function(){
                 if(xml.readyState == 4 && xml.status ==200){
                     console.log(xml.responseText);
                    // document.getElementById('a10').innerHTML=data[5].name; 
                  //  document.getElementById('a1').innerHTML=xml.responseText;
                  }}
                     xml.setRequestHeader('Content-Type','application/json')
                     xml.send(JSON.stringify({msg:123}));
                     
 
              }, 3000);

                   //  clean   public request
/*
                   let xml =new XMLHttpRequest();
                   xml.open('post','/time');
                   xml.onreadystatechange = function(){
                       if(xml.readyState == 4 && xml.status ==200){
                           console.log(xml.responseText);
                          // document.getElementById('a10').innerHTML=data[5].name; 
                        //  document.getElementById('a1').innerHTML=xml.responseText;
                       }}
                          xml.setRequestHeader('Content-Type','application/json')
                        //  xml.send(JSON.stringify({msg:inputVal}));
                        xml.send(JSON.stringify({msg:ad}));
                 */